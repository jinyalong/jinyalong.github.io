<!DOCTYPE html><html lang="zh-Hans"><head>
	
	
	
<link rel="stylesheet" href="/css/allinone.min.css">


	

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>MySQL | CodeFriday</title>

	<meta name="HandheldFriendly" content="True">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
	<meta name="generator" content="hexo">
	<meta name="author" content="codefriday">
	<meta name="description" content="">

	
	<meta name="keywords" content="">
	

	
	<link rel="shortcut icon" href="https://codefriday.oss-cn-beijing.aliyuncs.com/author.jpg">
	<link rel="apple-touch-icon" href="https://codefriday.oss-cn-beijing.aliyuncs.com/author.jpg">
	

	
	<meta name="theme-color" content="#3c484e">
	<meta name="msapplication-TileColor" content="#3c484e">
	

	

	

	<meta property="og:site_name" content="CodeFriday">
	<meta property="og:type" content="article">
	<meta property="og:title" content="MySQL | CodeFriday">
	<meta property="og:description" content="">
	<meta property="og:url" content="http://yoursite.com/2021/02/17/MySQL/">

	
	<meta property="article:published_time" content="2021-02-17T13:02:00+08:00"> 
	<meta property="article:author" content="codefriday">
	<meta property="article:published_first" content="CodeFriday, /2021/02/17/MySQL/">
	
<link rel="alternate" href="/atom.xml" title="CodeFriday" type="application/atom+xml">
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header outer" style="z-index: 999">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                <a href="/" title="Home">HOME</a>
                
            </li>
            
            
            <li>
                <a href="/about" title="ABOUT">ABOUT</a>
            </li>
            
            <li>
                <a href="/archives" title="ARCHIVES">ARCHIVES</a>
            </li>
            
            
        </ul> 
    </div>
    
    <div class="search-button">
        <a href="#search" class="subscribe-button" style="margin: 0 10px;">Search ...</a>
    </div>
     
    <div class="site-nav-right">
        
        <a href="#search" class="subscribe-button" style="margin: 0 10px;">Search ...</a>
         
        
<div class="social-links">
    
    
    <a class="social-link" title="github" href="https://github.com/jinyalong" target="_blank" rel="noopener">
        <svg viewBox="0 0 1049 1024" xmlns="http://www.w3.org/2000/svg"><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z"></path></svg>
    </a>
    
    
    <a class="social-link" title="facebook" href="https://blog.csdn.net/HNUCSEE" target="_blank" rel="noopener">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1049 1024"><path d="M1141.351404 39.055942l-28.91333 218.474629c-126.144728-19.927251-251.601043-38.376709-377.75495-27.674187-115.460564 9.802996-227.405635 32.180995-309.124802 122.987208-150.018878 166.696821-68.391499 396.461416 158.252293 437.463272 141.115408 25.52634 283.919721 11.785624 425.448176-8.123269-5.452228 112.440727-5.764308 95.303843-10.674985 205.229569-1.073924 24.057726 4.277337 14.612705-161.648461 31.914809-176.004159 9.004437-351.879815 11.189-520.550085-52.888447C156.545029 905.721534 30.675666 809.16019 5.176863 630.815428c-26.251468-183.595056 48.803865-331.796524 192.516883-446.128091C413.36883 13.098197 790.802521-47.271 1141.351404 39.055942z" fill="#ffffff"></path></svg>
    </a>
    
    
    
    
    
</div>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <section class="post-full-meta">
                <time class="post-full-meta-date" datetime="2021-02-17T05:01:42.000Z" itemprop="datePublished">
                    2021-02-17
                </time>
                
                <span class="date-divider">/</span>
                
                <a href="/categories/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/">第三阶段</a>&nbsp;&nbsp;
                
                
            </section>
            <h1 class="post-full-title">MySQL</h1>
        </header>
        <article class="post-full no-image">
            
            <section class="post-full-content">
                <div id="lightgallery" class="markdown-body">
                    <h2 id="1、概述及准备工作"><a href="#1、概述及准备工作" class="headerlink" title="1、概述及准备工作"></a>1、概述及准备工作</h2><p>数据库（DB，DateBase）</p>
<p>概念：安装在操作系统（Windows，Linux，Mac…）上的软件，用于存储和管理数据。</p>
<blockquote>
<p>数据库分类</p>
</blockquote>
<p><strong>关系型数据库：</strong>（SQL）</p>
<ul>
<li>MySQL，Oracle，Sql Server，DB2，SQLlite</li>
<li>通过表和表之间，行和列之间关系进行数据的存储。</li>
</ul>
<p><strong>非关系型数据库：</strong>（NoSQL）——Not Only</p>
<ul>
<li>Redis，MongDB</li>
<li>以对象存储，通过对象自身的属性来决定。</li>
</ul>
<blockquote>
<p>DBMS（数据库管理系统）</p>
</blockquote>
<ul>
<li>数据库的管理软件，科学有效的管理数据，维护和获取数据。</li>
<li>MySQL本质就是一个数据库管理系统！</li>
</ul>
<p><img alt="image-20210210132615008" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210132615008.png" data-src="/2021/02/17/MySQL/image-20210210132615008.png"></p>
<blockquote>
<p>MySQL简介</p>
</blockquote>
<p><img alt="image-20210210132719212" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210132719212.png" data-src="/2021/02/17/MySQL/image-20210210132719212.png"></p>
<p>官网：<a href="https://www.mysql.com" target="_blank" rel="noopener">https://www.mysql.com</a></p>
<p>5.7：稳定版</p>
<blockquote>
<p>压缩包版MySQL安装5.7</p>
</blockquote>
<p>压缩包下载地址：<a href="https://dev.mysql.com/downloads/mysql/5.7.html" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/5.7.html</a></p>
<p>1、官网下载压缩包，并解压到相关目录</p>
<p>2、配置环境变量：<code>此电脑-右键属性-高级系统设置-环境变量</code>，<code>Path</code>目录新增Mysql压缩包bin目录的路径</p>
<p><img alt="image-20210210141411892" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210141411892.png" data-src="/2021/02/17/MySQL/image-20210210141411892.png"></p>
<p>3、在MySQL目录下新建<code>my.ini</code>配置文件</p>
<figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span>  </span><br><span class="line"><span class="comment">#第一个为Mysql解压目录</span></span><br><span class="line"><span class="attr">basedir</span>=D:\Environment\mysql-<span class="number">5.7</span>.<span class="number">33</span>\</span><br><span class="line"><span class="comment">#第二个为data目录，无需自己新建！！！会自动生成</span></span><br><span class="line"><span class="attr">datadir</span>=D:\Environment\mysql-<span class="number">5.7</span>.<span class="number">33</span>\data\</span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment">#第一次登录跳过密码</span></span><br><span class="line">skip-grant-tables</span><br></pre></td></tr></tbody></table></figure>

<p>4、<strong>管理员模式</strong>启动<code>CMD</code>，切换到MySQL目录下的<code>bin</code>目录，执行指令<code>mysqld install</code>，可能会提示缺少<code>dll</code>文件安装失败，需要到微软官网下载一个插件！</p>
<p><img alt="在这里插入图片描述" class="post-img b-lazy" href="/2021/02/17/MySQL/20200618113646466.png" data-src="/2021/02/17/MySQL/20200618113646466.png"></p>
<p><strong>下载 vcredist 地址：</strong><a href="https://www.microsoft.com/zh-CN/download/details.aspx?id=40784" target="_blank" rel="noopener">https://www.microsoft.com/zh-CN/download/details.aspx?id=40784</a></p>
<p><img alt="image-20210210141900322" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210141900322.png" data-src="/2021/02/17/MySQL/image-20210210141900322.png"></p>
<p>5、初始化，会创建<code>data</code>文件夹。执行指令<code>mysqld --initialize-insecure --user=mysql</code></p>
<p>6、执行指令<code>net start mysql</code>启动mysql服务</p>
<p><img alt="image-20210210142049821" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210142049821.png" data-src="/2021/02/17/MySQL/image-20210210142049821.png"></p>
<p>7、执行指令<code>mysql -u root -p</code>登入mysql，由于之前的设置是不需要密码就直接登录的，看到输入密码的提示直接回车即可。然后命令行提示变成<code>mysql&gt;</code>即为成功了。</p>
<p>8、执行命令修改密码：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update mysql.user set authentication_string=password('123456') where user='root' and Host = 'localhost';</span><br></pre></td></tr></tbody></table></figure>

<p>9、 <code>flush privileges;</code>刷新权限，然后把<code>my.ini</code>中最后一行跳过密码验证删除。(<code>skip-grant-tables</code>)</p>
<p>10、停止mysql服务的命令<code>net stop mysql</code>；</p>
<p><img alt="image-20210210143321098" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210210143321098.png" data-src="/2021/02/17/MySQL/image-20210210143321098.png"></p>
<blockquote>
<p>安装SQLyog</p>
</blockquote>
<p>命令行操作数据库不直观，因此下载一些可视化软件，在此我使用了MySQLyog</p>
<p>官网：<a href="https://store.webyog.com/product/sqlyogpricing" target="_blank" rel="noopener">https://store.webyog.com/product/sqlyogpricing</a></p>
<p>网上嫖注册码<del>~</del></p>
<h2 id="2、操作数据库"><a href="#2、操作数据库" class="headerlink" title="2、操作数据库"></a>2、操作数据库</h2><h3 id="2-1、基础命令"><a href="#2-1、基础命令" class="headerlink" title="2.1、基础命令"></a>2.1、基础命令</h3><blockquote>
<p>连接数据库</p>
</blockquote>
<p>命令行连接：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123456	<span class="comment">--连接数据库</span></span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string=<span class="keyword">password</span>(<span class="string">'123456'</span>) <span class="keyword">where</span> <span class="keyword">user</span>=<span class="string">'root'</span> <span class="keyword">and</span> Host = <span class="string">'localhost'</span>;	<span class="comment">--修改密码</span></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;	<span class="comment">--刷新权限</span></span><br><span class="line"><span class="comment">----------------------------------------</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;		<span class="comment">--	查看所有数据库</span></span><br><span class="line"></span><br><span class="line">mysql&gt; use school;</span><br><span class="line">Database changed	<span class="comment">-- 	切换数据库命令——use 数据库名</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;		<span class="comment">--	查看数据库中所有的表</span></span><br><span class="line"><span class="keyword">describe</span> student;	<span class="comment">--	显示表的详细信息</span></span><br><span class="line"></span><br><span class="line">mysql&gt; describe student;</span><br><span class="line">+<span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line">| Field | Type         | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line">| id    | int(10)      | NO   | PRI | NULL    |       |</span><br><span class="line">| name  | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| age   | int(3)       | NO   |     | NULL    |       |</span><br><span class="line">+<span class="comment">-------+--------------+------+-----+---------+-------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> 名字;	<span class="comment">--	创建数据库</span></span><br><span class="line">exit;		<span class="comment">--	退出连接</span></span><br><span class="line">sql的单行注释：	<span class="comment">--</span></span><br><span class="line">sql的多行注释：	<span class="comment">/**/</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>数据库语言分类</p>
</blockquote>
<p><strong>数据库xxx语言</strong></p>
<p><strong>DDL——定义</strong></p>
<p><strong>DML——操作，管理</strong></p>
<p><strong>DQL——查询</strong></p>
<p><strong>DCL——控制</strong></p>
<h3 id="2-2、数据库的列类型"><a href="#2-2、数据库的列类型" class="headerlink" title="2.2、数据库的列类型"></a>2.2、数据库的列类型</h3><blockquote>
<p>数值</p>
</blockquote>
<ul>
<li><p>tinyint              1个字节</p>
</li>
<li><p>smallint           2个字节</p>
</li>
<li><p>mediumint      3个字节</p>
</li>
<li><p><strong>int 标准的整数 4个字节</strong></p>
</li>
<li><p>bigint                 8个字节</p>
</li>
<li><p>float   浮点数     4字节</p>
</li>
<li><p>double               8字节</p>
</li>
<li><p>decimal 字符串形式浮点数     金融计算的时候一般用精确的decimal</p>
</li>
</ul>
<blockquote>
<p>字符串</p>
</blockquote>
<ul>
<li><p>char        字符串固定大小，0-255，</p>
</li>
<li><p><strong>varchar  可变字符串  0-65535</strong>  </p>
</li>
<li><p>tinytext   微型文本   2^8-1</p>
</li>
<li><p><strong>text          文本串       2^16-1  保存大文本。</strong></p>
</li>
</ul>
<blockquote>
<p>时间日期</p>
</blockquote>
<ul>
<li>date    YYYY-MM-DD    日期格式</li>
<li>time    HH:mm:ss    时间格式</li>
<li><strong>datetime    YYYY-MM-DD HH:mm:ss    最常用的时间格式</strong></li>
<li><strong>timestamp    时间戳，1970-01-01到现在的毫秒数。</strong></li>
<li>year    年份表示</li>
</ul>
<blockquote>
<p>null</p>
</blockquote>
<ul>
<li>没有值，未知</li>
<li><strong>注意：不要使用null值进行运算。</strong></li>
</ul>
<h3 id="2-3、数据库的字段属性"><a href="#2-3、数据库的字段属性" class="headerlink" title="2.3、数据库的字段属性"></a>2.3、数据库的字段属性</h3><blockquote>
<p>Unsigned</p>
</blockquote>
<ul>
<li>Unsigned：无符号的整数</li>
<li>不能声明为负数</li>
</ul>
<blockquote>
<p>zerofill</p>
</blockquote>
<ul>
<li>0填充的</li>
<li>不足的位数使用0填充</li>
</ul>
<blockquote>
<p>自增</p>
</blockquote>
<ul>
<li>自动在上一条记录的基础上加1</li>
<li>通常用来设计唯一的逐渐，必须是整数类型</li>
<li>可以自定义设计主键的开始值和步长</li>
</ul>
<blockquote>
<p>非空 NULL NOT NULL</p>
</blockquote>
<ul>
<li>NULL表示该字段必须赋值，否则报错</li>
</ul>
<blockquote>
<p>默认 default</p>
</blockquote>
<ul>
<li>设置默认值</li>
</ul>
<blockquote>
<p>规范（拓展）</p>
</blockquote>
<p>每个数据表必须包含以下五个字段：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id	主键</span><br><span class="line">version	用于做乐观锁</span><br><span class="line">is_delete	伪删除</span><br><span class="line">gmt_create	创建时间</span><br><span class="line">gmt_update	修改时间</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-4、创建表"><a href="#2-4、创建表" class="headerlink" title="2.4、创建表"></a>2.4、创建表</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 学会表</span></span><br><span class="line"><span class="comment">-- id,name,pwd,sex,birth,address,email</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="string">`student`</span>(</span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'学号'</span>,</span><br><span class="line">    <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'匿名'</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">    <span class="string">`pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'123456'</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line">    <span class="string">`sex`</span> <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'男'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line">    <span class="string">`birth`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'出生日期'</span>,</span><br><span class="line">    <span class="string">`address`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'地址'</span>,</span><br><span class="line">    <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮件'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>) </span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=<span class="string">`student`</span>utf8</span><br></pre></td></tr></tbody></table></figure>

<p><strong>格式：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="string">`表名称`</span>(</span><br><span class="line">    <span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line">    <span class="string">`字段名`</span> 列类型 [属性] [索引] [注释],</span><br><span class="line">    ......</span><br><span class="line">    <span class="string">`字段名`</span> 列类型 [属性] [索引] [注释]</span><br><span class="line">)[表类型][字符集设置][表注释]</span><br></pre></td></tr></tbody></table></figure>

<p>常用命令：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> school <span class="comment">-- CREATE DATABASE `school` /*!40100 DEFAULT CHARACTER SET utf8 */</span></span><br><span class="line"><span class="comment">-- 查看创建数据库的sql</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student  </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">CREATE TABLE `student` (</span></span><br><span class="line"><span class="comment">  `id` int(4) NOT NULL AUTO_INCREMENT COMMENT '学号',</span></span><br><span class="line"><span class="comment">  `name` varchar(30) NOT NULL DEFAULT '匿名' COMMENT '姓名',</span></span><br><span class="line"><span class="comment">  `pwd` varchar(32) NOT NULL DEFAULT '123456' COMMENT '密码',</span></span><br><span class="line"><span class="comment">  `sex` varchar(2) NOT NULL DEFAULT '男' COMMENT '性别',</span></span><br><span class="line"><span class="comment">  `birth` datetime DEFAULT NULL COMMENT '出生日期',</span></span><br><span class="line"><span class="comment">  `address` varchar(100) DEFAULT NULL COMMENT '地址',</span></span><br><span class="line"><span class="comment">  `email` varchar(50) DEFAULT NULL COMMENT '邮件',</span></span><br><span class="line"><span class="comment">  PRIMARY KEY (`id`)</span></span><br><span class="line"><span class="comment">) ENGINE=InnoDB DEFAULT CHARSET=utf8</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">DESCRIBE</span> student</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-5、数据表的类型"><a href="#2-5、数据表的类型" class="headerlink" title="2.5、数据表的类型"></a>2.5、数据表的类型</h3><p><strong>数据库引擎：</strong></p>
<p>INNODB    默认使用</p>
<p>MYISAM    早些年使用</p>
<table>
<thead>
<tr>
<th></th>
<th align="center">MYISAM</th>
<th align="center">INNODB</th>
</tr>
</thead>
<tbody><tr>
<td>事务支持</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td>外检约束</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td>全文索引</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
<tr>
<td>表空间大小</td>
<td align="center">较小</td>
<td align="center">较大，约为两倍</td>
</tr>
</tbody></table>
<p>常规使用操作：</p>
<ul>
<li>MYISAM：    节约空间，速度较快</li>
<li>INNODB：    安全性高，支持外键，可以多表多用户操作</li>
</ul>
<blockquote>
<p>在物理空间存在的位置</p>
</blockquote>
<p>所有数据库文件都存在data目录下，一个文件夹对应一个数据库，本质还是文件存储。</p>
<p>MySQL引擎在物理文件上的区别：</p>
<ul>
<li>INNODB在数据库表中只有一个*.frm文件，以及上级目录下的ibdata1文件</li>
<li>MYISAM对应的文件<ul>
<li>*.frm      -表结构的定义文件</li>
<li>*.MYD    -数据文件</li>
<li>*.MYI      -索引文件</li>
</ul>
</li>
</ul>
<blockquote>
<p>数据库表的字符集编码</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHARSET=utf8</span><br></pre></td></tr></tbody></table></figure>

<p>不设置的话，会是mysql默认的编码，不支持中文。</p>
<h3 id="2-6、修改和删除表"><a href="#2-6、修改和删除表" class="headerlink" title="2.6、修改和删除表"></a>2.6、修改和删除表</h3><blockquote>
<p>修改</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 旧表名 <span class="keyword">RENAME</span> <span class="keyword">AS</span> 新表名	<span class="comment">--修改表名</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 字段名 字段列属性			<span class="comment">--增加字段</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">MODIFY</span> 字段名 字段新属性			<span class="comment">--修改字段的约束</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">CHANGE</span> 旧字段名 新字段名 属性		<span class="comment">--重命名字段</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> 字段名						<span class="comment">--删除表的字段</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>删除</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> 表名						<span class="comment">--删除表，加条件判断是否存在</span></span><br></pre></td></tr></tbody></table></figure>

<p>所有创建和删除尽量加上条件判断，以免报错。</p>
<h2 id="3、MySQL数据管理"><a href="#3、MySQL数据管理" class="headerlink" title="3、MySQL数据管理"></a>3、MySQL数据管理</h2><h3 id="3-1、外键"><a href="#3-1、外键" class="headerlink" title="3.1、外键"></a>3.1、外键</h3><blockquote>
<p>创建表时设置外键</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`grade`</span>(</span><br><span class="line">    <span class="string">`gradeid`</span> <span class="built_in">INT</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年级id'</span>,</span><br><span class="line">    <span class="string">`gradename`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年级'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`gradeid`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'学号'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'匿名'</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">  <span class="string">`pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'123456'</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line">  <span class="string">`sex`</span> <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'男'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line">  <span class="string">`birth`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'出生日期'</span>,</span><br><span class="line">  <span class="string">`address`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'地址'</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮件'</span>,</span><br><span class="line">  <span class="string">`gradeid`</span> <span class="built_in">INT</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'学生的年级'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`FK_gradeid`</span> (<span class="string">`gradeid`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`FK_gradeid`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`gradeid`</span>) <span class="keyword">REFERENCES</span> <span class="string">`grade`</span>(<span class="string">`gradeid`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="comment">-- 定义外键</span></span><br><span class="line"><span class="comment">-- 约束外键 引用到其他数据表的其他列</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>表存在后设置外键</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`grade`</span>(</span><br><span class="line">    <span class="string">`gradeid`</span> <span class="built_in">INT</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年级id'</span>,</span><br><span class="line">    <span class="string">`gradename`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'年级'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`gradeid`</span>)</span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">'学号'</span>,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'匿名'</span> <span class="keyword">COMMENT</span> <span class="string">'姓名'</span>,</span><br><span class="line">  <span class="string">`pwd`</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'123456'</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line">  <span class="string">`sex`</span> <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'男'</span> <span class="keyword">COMMENT</span> <span class="string">'性别'</span>,</span><br><span class="line">  <span class="string">`birth`</span> DATETIME <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'出生日期'</span>,</span><br><span class="line">  <span class="string">`address`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'地址'</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮件'</span>,</span><br><span class="line">  <span class="string">`gradeid`</span> <span class="built_in">INT</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'学生的年级'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span>(<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"><span class="comment">-- 定义外键</span></span><br><span class="line"><span class="comment">-- 约束外键 引用到其他数据表的其他列</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`student`</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">`FK_gradeid`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(<span class="string">`gradeid`</span>) <span class="keyword">REFERENCES</span> grade(<span class="string">`gradeid`</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ALTER TABLE `表名` ADD CONSTRAINT 外键名 FOREIGN KEY(主表字段名) REFERENCES 从表名(从表字段)</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>总结：</strong></p>
<p>当有数据库级别外键存在时，若要删除从表，必须先删除主表。</p>
<h3 id="3-2、DML语言"><a href="#3-2、DML语言" class="headerlink" title="3.2、DML语言"></a>3.2、DML语言</h3><p><strong>数据库=数据存储+数据管理</strong></p>
<p><strong>DML语言</strong>：数据操作语言</p>
<ul>
<li><p>insert</p>
</li>
<li><p>update</p>
</li>
<li><p>delete</p>
</li>
</ul>
<h3 id="3-3、添加"><a href="#3-3、添加" class="headerlink" title="3.3、添加"></a>3.3、添加</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名([字段<span class="number">1</span>，字段<span class="number">2</span>，...]) <span class="keyword">VALUES</span>(<span class="string">'值1'</span>，<span class="string">'值2'</span>...)</span><br><span class="line"><span class="comment">-- 如果省略的字段，会自动从第一个开始匹配</span></span><br><span class="line">插入多行时用()包起来每一行的值！</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-4、修改"><a href="#3-4、修改" class="headerlink" title="3.4、修改"></a>3.4、修改</h3><p>语法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">set</span> 列名=<span class="keyword">value</span>,[列名=<span class="keyword">value</span>,...] <span class="keyword">WHERE</span> [条件]</span><br><span class="line">注意：</span><br><span class="line">列名是数据库的列，尽量加上<span class="string">``</span></span><br><span class="line">条件，筛选的条件，可以使用运算符</span><br><span class="line"><span class="keyword">value</span>可以是一个具体的值也可以是一个变量</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>条件运算符</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>条件等于具体的值</td>
</tr>
<tr>
<td>&lt;&gt;或!=</td>
<td>不等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>BETWEEM…AND…</td>
<td>条件的值在某个区间</td>
</tr>
<tr>
<td>AND</td>
<td>多个条件同时满足</td>
</tr>
<tr>
<td>OR</td>
<td>条件选择</td>
</tr>
</tbody></table>
<h3 id="3-5、删除"><a href="#3-5、删除" class="headerlink" title="3.5、删除"></a>3.5、删除</h3><blockquote>
<p>delete</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="string">`表名`</span> [<span class="keyword">WHERE</span> 条件]</span><br><span class="line"><span class="comment">-- 不加条件时全部删除</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>truncate</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> 表名<span class="comment">-- 清空表</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>区别</p>
</blockquote>
<ul>
<li>TRUNCATE重新设置自增列，计数器归零</li>
<li>TRUNCATE不会影响事务</li>
</ul>
<p><code>DELETE删除的问题</code>，重启数据库，现象</p>
<ul>
<li>INNODB：自增列从1开始，存在内存中</li>
<li>MYISAM：继续从上一个自增量开始，存在文件中</li>
</ul>
<h2 id="4、DQL查询数据"><a href="#4、DQL查询数据" class="headerlink" title="4、DQL查询数据"></a>4、DQL查询数据</h2><p>（Data Query Language-数据查询语言）</p>
<blockquote>
<p>SELECT语法：</p>
</blockquote>
<p><img alt="image-20210215140103536" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210215140103536.png" data-src="/2021/02/17/MySQL/image-20210215140103536.png"></p>
<h3 id="4-1、指定查询字段"><a href="#4-1、指定查询字段" class="headerlink" title="4.1、指定查询字段"></a>4.1、指定查询字段</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询整个表</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询指定的字段</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">'字段1'</span>,<span class="string">'字段2'</span>... <span class="keyword">FROM</span> 表名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 别名，给结果起一个新名字 AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`字段1`</span> <span class="keyword">AS</span> 新字段名,<span class="string">'字段2'</span> <span class="keyword">AS</span> ‘新字段名’ <span class="keyword">FROM</span> 表名 <span class="keyword">AS</span> 新表名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 函数 Concat(a,b)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'字段注释'</span>,字段名) <span class="keyword">AS</span> 新字段名 <span class="keyword">FROM</span> 表名</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>distinct</p>
</blockquote>
<p>作用：去除SELECT查询结果中重复的数据，重复数据只显示一条</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="string">`字段名`</span> <span class="keyword">FROM</span> <span class="string">`表名`</span> <span class="comment">--去重</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>数据库的列（表达式）</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>() <span class="comment">-- 查询数据库版本</span></span><br><span class="line"><span class="keyword">SELECT</span> @@auto_increment_increment <span class="comment">-- 查询自增量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`列名`</span>+<span class="number">1</span> <span class="keyword">AS</span> <span class="string">`提分后`</span> <span class="keyword">FROM</span> <span class="string">`表名`</span> <span class="comment">-- 数据库列字段值+1</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span>*<span class="number">2</span> <span class="keyword">AS</span> 计算结果 <span class="comment">-- 用来计算表达式</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-2、where条件字句"><a href="#4-2、where条件字句" class="headerlink" title="4.2、where条件字句"></a>4.2、where条件字句</h3><p><strong>作用：检索数据中符合条件的值</strong>，结果为布尔值</p>
<blockquote>
<p>逻辑运算符</p>
</blockquote>
<ul>
<li>and    &amp;&amp;</li>
<li>or      ||</li>
<li>Not    !</li>
</ul>
<blockquote>
<p>模糊查询：比较运算符</p>
</blockquote>
<ul>
<li>IS NULL——为空 </li>
<li>IS NOT NULL——不为空</li>
<li>BETWEEN…AND——在区间中</li>
<li>LIKE——<code>a like b</code>，SQL匹配，如果a匹配b，则结果为真，配合<code>%</code>和<code>_</code>，<code>%</code>匹配多个，<code>_</code>匹配一个字</li>
<li>IN——<code>a in（a1,a2,a3...）</code>——假设a是（a1,a2,a3…）其中一个则为真</li>
</ul>
<h3 id="4-3、联表查询"><a href="#4-3、联表查询" class="headerlink" title="4.3、联表查询"></a>4.3、联表查询</h3><blockquote>
<p>JOIN对比</p>
</blockquote>
<p><img alt="img" class="post-img b-lazy" href="/2021/02/17/MySQL/sql-join.png" data-src="/2021/02/17/MySQL/sql-join.png"></p>
<p><strong>实际上两个表的字段有重复的，然后通过这个重复的字段去查询两个表中的数据来合成一个表。同时在选择重复字段时，必须确定这个字段选用哪个表的。</strong></p>
<ul>
<li>left join：查询左表中有的所有值并合并右表</li>
<li>inner join：查询两个表都有的字段，交集</li>
<li>right join：查询右表所有，把左表综合进去</li>
</ul>
<blockquote>
<p>自连接</p>
</blockquote>
<p>自己的表和自己表连接，核心：一张表看做两张一样的表。</p>
<p>自连接是指使用表的别名实现表与其自身连接的查询方法。</p>
<p>假设在【成绩表】有【主键ID】【学生姓名】【课程名称】【成绩】等字段。</p>
<p><img alt="img" class="post-img b-lazy" href="/2021/02/17/MySQL/20190514105101377.png" data-src="/2021/02/17/MySQL/20190514105101377.png"><br>现在要查询 “语文成绩&gt;=数学成绩”的学生姓名，这时就可以使用自连接查询：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 【学生姓名】</span><br><span class="line"><span class="keyword">from</span> 【成绩表】 <span class="keyword">AS</span> a,【成绩表】 <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">where</span> a.【主键<span class="keyword">ID</span>】=b.【主键<span class="keyword">ID</span>】</span><br><span class="line"><span class="keyword">and</span> a.【成绩】&gt;=b.【成绩】</span><br><span class="line"><span class="keyword">and</span> a.【课程名称】=<span class="string">'语文'</span></span><br><span class="line"><span class="keyword">and</span> b.【课程名称】=<span class="string">'数学'</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-4、分页和排序"><a href="#4-4、分页和排序" class="headerlink" title="4.4、分页和排序"></a>4.4、分页和排序</h3><blockquote>
<p>排序</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 升序ASC，降序DESC</span></span><br><span class="line">ORDER BY 排序的字段 ASC/DESC</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>分页</p>
</blockquote>
 <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：limit 起始值，页面大小<span class="comment">--从0开始</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-5、子查询"><a href="#4-5、子查询" class="headerlink" title="4.5、子查询"></a>4.5、子查询</h3><p>where（计算出来的值）</p>
<p>本质：在where语句中嵌套一个子查询语句。还可以嵌套查询。</p>
<h2 id="5、MySQL函数"><a href="#5、MySQL函数" class="headerlink" title="5、MySQL函数"></a>5、MySQL函数</h2><h3 id="5-1、常用函数"><a href="#5-1、常用函数" class="headerlink" title="5.1、常用函数"></a>5.1、常用函数</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数值类：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ABS</span>(<span class="number">-1</span>)	<span class="comment">-- 绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CEILING</span>(<span class="number">5.5</span>) <span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">FLOOR</span>(<span class="number">5.5</span>) <span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RAND</span>() <span class="comment">-- 0~1之间的随机数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SIGN</span>(<span class="number">0</span>) <span class="comment">-- 判断一个数的符号，0-0,负数：-1,正数：1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字符串类：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">'codefriday'</span>) <span class="comment">-- 字符串长度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>() <span class="comment">-- 系统时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOCALTIME</span>() <span class="comment">-- 本地时间</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="5-2、聚合函数"><a href="#5-2、聚合函数" class="headerlink" title="5.2、聚合函数"></a>5.2、聚合函数</h3><table>
<thead>
<tr>
<th>函数名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>COUNT(字段)</td>
<td>查询记录的条数，忽略null，count(*),count(1)都是计算行数，不忽略null</td>
</tr>
<tr>
<td>SUM()</td>
<td>求和</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
</tbody></table>
<blockquote>
<p>分组过滤</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GROUP BY ... <span class="comment">-- 指定结果按照哪几个字段分组</span></span><br><span class="line">HAVING ...   <span class="comment">-- 过滤分组的记录必须满足的次要条件</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="5-3、数据库级别的MD5加密"><a href="#5-3、数据库级别的MD5加密" class="headerlink" title="5.3、数据库级别的MD5加密"></a>5.3、数据库级别的MD5加密</h3><p><strong>MD5信息摘要算法</strong>（英语：MD5 Message-Digest Algorithm），一种被广泛使用的密码散列函数，主要增强算法复杂度和不可逆性。</p>
<p>MD5破解原理只是收录了很多加密后的MD5字符串当做字典。</p>
<p>直接使用<code>MD5()</code>函数，由于不可逆性，校验时传入的明文密码先经过MD5再比对。</p>
<h2 id="6、事务"><a href="#6、事务" class="headerlink" title="6、事务"></a>6、事务</h2><h3 id="6-1、事务定义"><a href="#6-1、事务定义" class="headerlink" title="6.1、事务定义"></a>6.1、事务定义</h3><p><strong>要么都成功，要么都失败</strong>，一组SQL必须一起执行完，不能被打断！</p>
<blockquote>
<p>事务的ACID原则——原子性，一致性，隔离性，持久性</p>
</blockquote>
<p><strong>原子性(Atomicity)：</strong>是指一个事务要么全部执行，要么不执行，也就是说一个事务不可能只执行了一半就停止了。比如你从取款机取钱，这个事务可以分成两个步骤：1划卡，2出钱。不可能划了卡，而钱却没出来。这两步必须同时完成，要么就不完成。</p>
<p><strong>一致性(Consistency)：</strong>是指事务的运行并不改变数据库中数据的一致性。例如，完整性约束了a+b=10，一个事务改变了a，那么b也应该随之改变。</p>
<p><strong>独立性(Isolation）：</strong>事务的独立性也称作隔离性，是指两个以上的事务不会出现交错执行的状态。因为这样可能会导致数据不一致，更加具体的来讲，就是事务之间的操作是独立的。</p>
<p><strong>持久性(Durability）：</strong>事务的持久性是指事务执行成功以后，该事务对数据库所作的更改便是持久的保存在数据库之中，不会无缘无故的回滚。</p>
<blockquote>
<p>隔离级别</p>
</blockquote>
<p><strong>脏读：</strong>一个事务读取了另外一个事务未提交的数据。</p>
<p><strong>不可重复读：</strong>在一个事务内读取一个表，多次读取结果不同！</p>
<p><strong>虚读（幻读）：</strong>是指一个事务读取到了别的事务插入的数据，导致前后读取不一致（一般是行影响）</p>
<h3 id="6-2、执行事务"><a href="#6-2、执行事务" class="headerlink" title="6.2、执行事务"></a>6.2、执行事务</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MYSQL默认自动提交事务。</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">0</span> <span class="comment">-- 关闭自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">1</span> <span class="comment">-- 开启自动提交，默认开启的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 流程：</span></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">0</span>; <span class="comment">-- 关闭自动提交</span></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span> <span class="comment">-- 开启一个事务</span></span><br><span class="line"><span class="keyword">INSERT</span> xxx</span><br><span class="line"><span class="keyword">INSERT</span> xxx</span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- 提交事务并持久化，持久化后不可回滚</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>; <span class="comment">-- 回滚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">1</span>; <span class="comment">-- 恢复默认值</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>模拟转账场景</p>
</blockquote>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> shop <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci</span><br><span class="line"><span class="keyword">USE</span> shop</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">account</span>( </span><br><span class="line">    <span class="string">`id`</span> <span class="built_in">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT, </span><br><span class="line">    <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="string">`money`</span>, </span><br><span class="line">    <span class="built_in">DECIMAL</span>(<span class="number">9</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,   <span class="comment">-- 第一个参数表示位数，第二个参数表示小数位数</span></span><br><span class="line">    PRIMARY <span class="keyword">KEY</span>(<span class="string">`id`</span>) </span><br><span class="line">)<span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8; </span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">account</span>(<span class="string">`name`</span>,<span class="string">`money`</span>) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">'A'</span>,<span class="number">1000.00</span>),</span><br><span class="line">(<span class="string">'B'</span>,<span class="number">2000.00</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">START</span> <span class="keyword">TRANSACTION</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> money=money<span class="number">-500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'A'</span>  <span class="comment">-- A转出500</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">account</span> <span class="keyword">SET</span> money=money+<span class="number">500</span> <span class="keyword">WHERE</span> <span class="string">`name`</span> = <span class="string">'B'</span>  <span class="comment">-- B收到500</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> autocommit = <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="7、索引"><a href="#7、索引" class="headerlink" title="7、索引"></a>7、索引</h2><blockquote>
<p>MySQL官方对索引的定义为:索引(Index)是帮助MySQL高效获取数据的数据结构。</p>
<p>提取句子主干，就可以得到索引的本质:索引是数据结构。</p>
</blockquote>
<h3 id="7-1、索引分类"><a href="#7-1、索引分类" class="headerlink" title="7.1、索引分类"></a>7.1、索引分类</h3><ul>
<li>主键索引（PRIMARY KEY）<ul>
<li>唯一的标识，主键不可重复，只能有一个列作为主键索引</li>
</ul>
</li>
<li>唯一索引（UNIQUE KEY）<ul>
<li>避免重复的列出现，不可重复，一个表可以有多个唯一索引</li>
</ul>
</li>
<li>常规索引（KEY/INDEX）<ul>
<li>默认的，index，key关键字设置</li>
</ul>
</li>
<li>全文索引（FULLTEXT）<ul>
<li>在特定数据库引擎才有，MYISAM</li>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="comment">-- 分析sql执行情况</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student;	<span class="comment">-- 非全文索引</span></span><br><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(studentname) AGAINST(<span class="string">'刘'</span>) <span class="comment">-- 全文索引，数据量小不起作用</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="7-2、测试索引"><a href="#7-2、测试索引" class="headerlink" title="7.2、测试索引"></a>7.2、测试索引</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`app_user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">BIGINT</span>(<span class="number">20</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`gender`</span> <span class="built_in">TINYINT</span>(<span class="number">4</span>) <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">  <span class="string">`update_time`</span> <span class="built_in">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">INNODB</span> AUTO_INCREMENT=<span class="number">1000001</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1、插入100万数据.</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="comment">-- 写函数之前必须要写$$标志</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data ()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> <span class="keyword">num</span> <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">    WHILE i&lt;num DO</span><br><span class="line">        <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`app_user`</span>(<span class="string">`name`</span>,<span class="string">`email`</span>,<span class="string">`phone`</span>,<span class="string">`gender`</span>)<span class="keyword">VALUES</span>(<span class="keyword">CONCAT</span>(<span class="string">'用户'</span>,i),<span class="string">'19224305@qq.com'</span>,<span class="string">'123456789'</span>,<span class="keyword">FLOOR</span>(<span class="keyword">RAND</span>()*<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">SET</span> i=i+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line">    RETURN i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2、执行此函数 生成一百万条数据大约要执行半分钟</span></span><br><span class="line"><span class="keyword">SELECT</span> mock_data() </span><br><span class="line"><span class="comment">-- 3、查询表中数据</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> app_user;</span><br></pre></td></tr></tbody></table></figure>

<p><img alt="image-20210215160802012" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210215160802012.png" data-src="/2021/02/17/MySQL/image-20210215160802012.png"></p>
<blockquote>
<p>添加索引后查询结果：</p>
</blockquote>
<p><img alt="image-20210215161143273" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210215161143273.png" data-src="/2021/02/17/MySQL/image-20210215161143273.png"></p>
<h3 id="7-3、索引原则"><a href="#7-3、索引原则" class="headerlink" title="7.3、索引原则"></a>7.3、索引原则</h3><ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li>小数据表不需要加索引</li>
<li>索引一般加在常用来查询的字段</li>
</ul>
<blockquote>
<p>索引的数据结构</p>
</blockquote>
<p>Hash类型索引</p>
<p>BTREE：INNODB默认的索引</p>
<h2 id="8、权限管理和备份"><a href="#8、权限管理和备份" class="headerlink" title="8、权限管理和备份"></a>8、权限管理和备份</h2><h3 id="8-1、权限管理"><a href="#8-1、权限管理" class="headerlink" title="8.1、权限管理"></a>8.1、权限管理</h3><blockquote>
<p>SQL命令</p>
</blockquote>
<p><strong>用户表：mysql.user</strong></p>
<p>本质就是对这张表的增删改查</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建用户 CREATE USER 用户名 IDENTIFIED BY '密码'</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> codefriday <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改密码（当前登录的用户）</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span>=<span class="keyword">PASSWORD</span>(<span class="string">'新密码'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改密码(指定用户)</span></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> 用户名 = <span class="keyword">PASSWORD</span>(<span class="string">'新密码'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 重命名</span></span><br><span class="line"><span class="keyword">RENAME</span> <span class="keyword">USER</span> 原来的名字 <span class="keyword">TO</span> 新的名字</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户授权,所有权限，但是 GRANT权限只有root有，不能给被人授权</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看权限</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> 用户名</span><br><span class="line"><span class="comment">-- 管理员权限查看</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GRANTS</span> <span class="keyword">FOR</span> root@localhost</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 撤销权限 REVOKE 哪些权限，在哪个库，给谁撤销</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGS <span class="keyword">ON</span> *.* <span class="keyword">FROM</span> 用户名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> 用户名</span><br></pre></td></tr></tbody></table></figure>

<h3 id="8-2、MYSQL备份"><a href="#8-2、MYSQL备份" class="headerlink" title="8.2、MYSQL备份"></a>8.2、MYSQL备份</h3><ul>
<li>保证重要数据不丢失</li>
<li>数据转移</li>
</ul>
<blockquote>
<p>备份的方式</p>
</blockquote>
<ul>
<li>直接拷贝物理文件</li>
<li>在Sqlyog这种可视化工具中手动导出备份</li>
<li>使用命令行导出mysqldump</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mysqldump -h主机 -uroot -p密码 数据库 [表1 表2...] &gt; 物理磁盘位置</span></span><br><span class="line">mysqldump -uroot -pcodefriday school student &gt; D:/1.sql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入操作，先登录之后，切换到指定数据库</span></span><br><span class="line">mysql&gt;<span class="built_in">source</span> 备份文件物理磁盘地址</span><br></pre></td></tr></tbody></table></figure>



<h2 id="9、规范数据库设计"><a href="#9、规范数据库设计" class="headerlink" title="9、规范数据库设计"></a>9、规范数据库设计</h2><h3 id="9-1、为什么需要设计"><a href="#9-1、为什么需要设计" class="headerlink" title="9.1、为什么需要设计"></a>9.1、为什么需要设计</h3><p><strong>当数据库比较复杂时，需要设计</strong></p>
<ul>
<li>数据冗余，浪费空间</li>
<li>数据库插入删除麻烦，要屏蔽物理外键</li>
<li>程序性能差，比如查询数据库效率不高。</li>
</ul>
<blockquote>
<p>软件开发中，关于数据库设计</p>
</blockquote>
<ul>
<li>分析需求：分析业务和需求处理的数据库的需求</li>
<li>概要设计：设计关系图E-R图</li>
</ul>
<h3 id="9-2、三大范式"><a href="#9-2、三大范式" class="headerlink" title="9.2、三大范式"></a>9.2、三大范式</h3><blockquote>
<p>第一范式（1NF）</p>
</blockquote>
<p><strong>要求数据库表的每一列都是不可分割的原子数据项。</strong></p>
<blockquote>
<p>第二范式（2NF）</p>
</blockquote>
<p><strong>前提：满足第一范式。</strong></p>
<p><strong>第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。</strong></p>
<p><strong>每张表只描述一件事情。</strong></p>
<blockquote>
<p>第三范式（3NF）</p>
</blockquote>
<p><strong>前提：满足一二范式。</strong></p>
<p><strong>第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</strong></p>
<blockquote>
<p>规范性 和 性能</p>
</blockquote>
<p>阿里规约：关联查询不得超过三张表</p>
<ul>
<li>考虑商业化需求和目标，数据库性能更重要</li>
<li>在规范性能问题时考虑规范性</li>
<li>故意增加某些冗余字段，减少联合查询的表数量</li>
<li>故意增加计算列（从大数据量降低为小数据量的查询：索引）</li>
</ul>
<h2 id="10、JDBC"><a href="#10、JDBC" class="headerlink" title="10、JDBC"></a>10、JDBC</h2><h3 id="10-1、数据库驱动"><a href="#10-1、数据库驱动" class="headerlink" title="10.1、数据库驱动"></a>10.1、数据库驱动</h3><p>不同数据库有着不同的驱动程序，有数据库厂商提供驱动程序。</p>
<p><strong>Oracle数据库：</strong><br>驱动程序包名：ojdbc14.jar<br>驱动类的名字：oracle.jdbc.driver.OracleDriver<br>JDBC URL：jdbc:oracle:thin:@dbip:port:databasename<br>说明：驱动程序包名有可能会变<br>JDBC URL中各个部分含义如下：<br>dbip –为数据库服务器的IP地址，如果是本地可写：localhost或127.0.0.1。<br>port –为数据库的监听端口，需要看安装时的配置，缺省为1521。<br>databasename –为数据库的SID，通常为全局数据库的名字。</p>
<p><strong>SQL Server数据库：</strong><br>驱动程序包名：msbase.jar mssqlserver.jar msutil.jar<br>驱动类的名字：com.microsoft.jdbc.sqlserver.SQLServerDriver<br>JDBC URL：jdbc:microsoft:sqlserver://dbip:port;DatabaseName=databasename<br>说明：驱动程序包名有可能会变<br>JDBC URL中各个部分含义如下：<br>dbip –为数据库服务器的IP地址，如果是本地可写：localhost或127.0.0.1。<br>port –为数据库的监听端口，需要看安装时的配置，缺省为1433。<br>databasename –数据库的名字。</p>
<p><strong>MySQL数据库：</strong><br>驱动程序包名：mysql-connector-Java-3.1.11-bin.jar<br>驱动类的名字：com.mysql.jdbc.Driver<br>JDBC URL：jdbc:mysql://dbip:port/databasename<br>说明：驱动程序包名有可能会变<br>JDBC URL其中各个部分含义如下：<br>dbip –为数据库服务器的IP地址，如果是本地可写：localhost或127.0.0.1。<br>port –为数据库的监听端口，需要看安装时的配置，缺省为3306。<br>databasename –数据库的名字。</p>
<h3 id="10-2、JDBC"><a href="#10-2、JDBC" class="headerlink" title="10.2、JDBC"></a>10.2、JDBC</h3><p>Java数据库连接，（Java Database Connectivity，简称JDBC）是Java语言中用来规范客户端程序如何来访问数据库的应用程序接口，提供了诸如查询和更新数据库中数据的方法。JDBC也是Sun Microsystems的商标。</p>
<p><img alt="image-20210215180551671" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210215180551671.png" data-src="/2021/02/17/MySQL/image-20210215180551671.png"></p>
<p><code>java.sql</code>，<code>javax.sql</code></p>
<h3 id="10-3、第一个JDBC程序"><a href="#10-3、第一个JDBC程序" class="headerlink" title="10.3、第一个JDBC程序"></a>10.3、第一个JDBC程序</h3><blockquote>
<p>第一个测试程序</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>{</span><br><span class="line">        <span class="comment">//1.加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">        <span class="comment">//2.连接的url以及用户</span></span><br><span class="line">        String url = <span class="string">"jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=utf8"</span>;</span><br><span class="line">        String user = <span class="string">"root"</span>;</span><br><span class="line">        String pwd = <span class="string">"codefriday"</span>;</span><br><span class="line">        <span class="comment">//3.获得连接</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url, user, pwd);</span><br><span class="line">        <span class="comment">//4.获得执行对象</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        <span class="comment">//5.执行一个sql</span></span><br><span class="line">        String sql = <span class="string">"SELECT * FROM account"</span>;</span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(resultSet.next()){</span><br><span class="line">            System.out.println(<span class="string">"id="</span> + resultSet.getObject(<span class="string">"id"</span>));</span><br><span class="line">            System.out.println(<span class="string">"name="</span> + resultSet.getObject(<span class="string">"name"</span>));</span><br><span class="line">            System.out.println(<span class="string">"money="</span> + resultSet.getObject(<span class="string">"money"</span>));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.关闭连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>DriverManager</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.加载驱动</span></span><br><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line"><span class="comment">//2.连接的url以及用户</span></span><br><span class="line">String url = <span class="string">"jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=utf8"</span>;</span><br><span class="line">String user = <span class="string">"root"</span>;</span><br><span class="line">String pwd = <span class="string">"codefriday"</span>;</span><br><span class="line"><span class="comment">//3.获得连接</span></span><br><span class="line">Connection connection = DriverManager.getConnection(url, user, pwd);</span><br><span class="line"></span><br><span class="line"><span class="comment">//connection代表数据库</span></span><br><span class="line"><span class="comment">//可以设置事务提交，事务回滚</span></span><br></pre></td></tr></tbody></table></figure>

<p><code>Class.forName("com.mysql.jdbc.Driver")</code>本质是加载<code>com.mysql.jdbc.Driver</code>这个类，然后会执行静态代码块注册一个驱动，源码如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Source code recreated from a .class file by IntelliJ IDEA</span></span><br><span class="line"><span class="comment">// (powered by FernFlower decompiler)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.mysql.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Driver</span> <span class="keyword">extends</span> <span class="title">NonRegisteringDriver</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">sql</span>.<span class="title">Driver</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Driver</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            DriverManager.registerDriver(<span class="keyword">new</span> Driver());</span><br><span class="line">        } <span class="keyword">catch</span> (SQLException var1) {</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Can't register driver!"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>URL</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String url = <span class="string">"jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=utf8"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mysql默认端口：3306</span></span><br><span class="line"><span class="comment">//jdbc:mysql://主机地址:端口号/数据库名?参数1&amp;参数2&amp;...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//oracle默认端口：1521</span></span><br><span class="line"><span class="comment">//jdbc:oracle:thin:@localhost:1521:sid</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>Statement：执行SQL的对象（PrepareStatement）</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">statement.executeQuery() <span class="comment">// 执行查询操作，返回结果集ResultSet</span></span><br><span class="line">statement.execute(); <span class="comment">//可以执行任何sql</span></span><br><span class="line">statement.executeUpdate();<span class="comment">// 更新，插入，删除，返回受影响的行数</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ResultSet</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过数据表字段名获取结果</span></span><br><span class="line">resultSet.getObject();</span><br><span class="line">resultSet.getString();</span><br><span class="line">resultSet.getInt();</span><br><span class="line">resultSet.getDate();</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<p>遍历：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resultSet.next();<span class="comment">//移动到下一行</span></span><br><span class="line">resultSet.beforeFirst();<span class="comment">//移动到最前面</span></span><br><span class="line">resultSet.afterLast();<span class="comment">//移动到最后面</span></span><br><span class="line">resultSet.previous();<span class="comment">//移动到前一行</span></span><br><span class="line">resultSet.absolute(<span class="number">3</span>);<span class="comment">//移动到指定行</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>释放资源</p>
</blockquote>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//6.关闭连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"><span class="comment">//用完必须释放，很占用内存资源</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="10-4、Statement对象"><a href="#10-4、Statement对象" class="headerlink" title="10.4、Statement对象"></a>10.4、Statement对象</h3><blockquote>
<p>代码测试</p>
</blockquote>
<p>编写工具类读取配置文件</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo02.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">jdbcUtils</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String Driver = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String Url = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String User = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String Password = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            InputStream in = jdbcUtils.class.getClassLoader().getResourceAsStream("db.properties");</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(in);</span><br><span class="line">            Driver = properties.getProperty(<span class="string">"Driver"</span>);</span><br><span class="line">            Url = properties.getProperty(<span class="string">"Url"</span>);</span><br><span class="line">            User = properties.getProperty(<span class="string">"User"</span>);</span><br><span class="line">            Password = properties.getProperty(<span class="string">"Password"</span>);</span><br><span class="line">            Class.forName(Driver);<span class="comment">//驱动只需要加载一次</span></span><br><span class="line">        } <span class="keyword">catch</span> (IOException | ClassNotFoundException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(Url,User,Password);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection con, Statement st, ResultSet rs)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">if</span>(rs!=<span class="keyword">null</span>){</span><br><span class="line">            rs.close();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(st!=<span class="keyword">null</span>){</span><br><span class="line">            st.close();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(con!=<span class="keyword">null</span>){</span><br><span class="line">            con.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">Url</span>=<span class="string">jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">User</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">Password</span>=<span class="string">codefriday</span></span><br></pre></td></tr></tbody></table></figure>

<p>测试插入操作：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codefriday.demo02.utils.jdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInsert</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            conn =  jdbcUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">"INSERT INTO account(`name`,`money`) VALUES('C',10000.00)"</span>;</span><br><span class="line">            <span class="keyword">int</span> s = st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(s&gt;<span class="number">0</span>){</span><br><span class="line">                System.out.println(<span class="string">"插入成功"</span>);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">            jdbcUtils.release(conn,st,rs);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>注意：使用手动拼接字符串的话，会导致SQL注入问题，也就是输入过滤不严格导致的！</strong></p>
<h3 id="10-5、PreparedStatement对象"><a href="#10-5、PreparedStatement对象" class="headerlink" title="10.5、PreparedStatement对象"></a>10.5、PreparedStatement对象</h3><p>可以防止SQL注入，效率更高！</p>
<p>区别：预编译sql，使用<code>?</code>代替参数，设置参数后提交执行。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codefriday.demo02.utils.jdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psm = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            String sql = <span class="string">"insert into account(`name`,`money`) values(?,?)"</span>;</span><br><span class="line">            psm = conn.prepareStatement(sql);</span><br><span class="line">            psm.setString(<span class="number">1</span>,<span class="string">"E"</span>);</span><br><span class="line">            psm.setBigDecimal(<span class="number">2</span>,<span class="keyword">new</span> BigDecimal(<span class="number">100.00</span>));</span><br><span class="line">            <span class="keyword">int</span> i = psm.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>){</span><br><span class="line">                System.out.println(<span class="string">"插入成功！"</span>);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">            jdbcUtils.release(conn,psm,rs);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>防止SQL注入的本质：把传递进来的参数当做字符，用``包裹起来，遇到转义字符会被直接转义。</p>
<h3 id="10-6、JDBC操作事务"><a href="#10-6、JDBC操作事务" class="headerlink" title="10.6、JDBC操作事务"></a>10.6、JDBC操作事务</h3><p>模拟A和B转账的事务：</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo02;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codefriday.demo02.utils.jdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement psm = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            conn = jdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">//关闭自动提交，事务自动开启</span></span><br><span class="line">            conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">            String sql = <span class="string">"update account set money=money+100 where name = 'A'"</span>;</span><br><span class="line">            psm = conn.prepareStatement(sql);</span><br><span class="line">            psm.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//模拟事务被意外中断</span></span><br><span class="line">            <span class="keyword">int</span> x = <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">            String sql1 = <span class="string">"update account set money=money-100 where name = 'B'"</span>;</span><br><span class="line">            psm = conn.prepareStatement(sql1);</span><br><span class="line">            psm.executeUpdate();</span><br><span class="line"></span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            <span class="comment">//捕获到异常回滚，其实会自动回滚</span></span><br><span class="line">            conn.rollback();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">            jdbcUtils.release(conn,psm,rs);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="10-9、连接池"><a href="#10-9、连接池" class="headerlink" title="10.9、连接池"></a>10.9、连接池</h3><p>类似于线程池的池化技术，预先准备资源，开启连接和释放连接消耗资源。</p>
<p>常用连接数——最小连接数</p>
<p>最大连接数——最高允许多少连接</p>
<p>编写连接池：实现DataSource接口</p>
<p>DBCP，C3P0，Druid（阿里巴巴）</p>
<blockquote>
<p>DBCP使用实例</p>
</blockquote>
<p><strong>依赖的jar包：</strong></p>
<p><img alt="image-20210217132653078" class="post-img b-lazy" href="/2021/02/17/MySQL/image-20210217132653078.png" data-src="/2021/02/17/MySQL/image-20210217132653078.png"></p>
<p>下载地址：<a href="http://commons.apache.org/" target="_blank" rel="noopener">http://commons.apache.org/</a></p>
<p><strong>工具类编写，此处忽略释放资源的方法！</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo03.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp2.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">dbcpUtils</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span>{</span><br><span class="line">        <span class="keyword">try</span>{</span><br><span class="line">            InputStream in = dbcpUtils.class.getClassLoader().getResourceAsStream("dbconfig.properties");</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(in);</span><br><span class="line">            dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line">        }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>dbconfig.properties</strong></p>
<figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">codefriday</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#初试连接数</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">30</span></span><br><span class="line"><span class="comment">#最大活跃数</span></span><br><span class="line"><span class="attr">maxTotal</span>=<span class="string">30</span></span><br><span class="line"><span class="comment">#最大idle数</span></span><br><span class="line"><span class="attr">maxIdle</span>=<span class="string">10</span></span><br><span class="line"><span class="comment">#最小idle数</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">5</span></span><br><span class="line"><span class="comment">#最长等待时间(毫秒)</span></span><br><span class="line"><span class="attr">maxWaitMillis</span>=<span class="string">1000</span></span><br><span class="line"><span class="comment">#程序中的连接不使用后是否被连接池回收(该版本要使用removeAbandonedOnMaintenance和removeAbandonedOnBorrow)</span></span><br><span class="line"><span class="comment">#removeAbandoned=true</span></span><br><span class="line"><span class="attr">removeAbandonedOnMaintenance</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">removeAbandonedOnBorrow</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#连接在所指定的秒数内未使用才会被删除(秒)(为配合测试程序才配置为1秒)</span></span><br><span class="line"><span class="attr">removeAbandonedTimeout</span>=<span class="string">1</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>编写测试函数：</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo03;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codefriday.demo03.utils.dbcpUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testdbcp</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            conn =  dbcpUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">"INSERT INTO account(`name`,`money`) VALUES('C',10000.00)"</span>;</span><br><span class="line">            <span class="keyword">int</span> s = st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(s&gt;<span class="number">0</span>){</span><br><span class="line">                System.out.println(<span class="string">"插入成功"</span>);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">			st.close();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>C3P0</p>
</blockquote>
<p>可以使用xml自动化配置，也可以使用java代码调用setxxx配置信息。</p>
<p><strong>工具类编写</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo04.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.mchange.v2.c3p0.ComboPooledDataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">c3p0utils</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        ds = <span class="keyword">new</span> ComboPooledDataSource();<span class="comment">//读取默认配置文件</span></span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>{</span><br><span class="line">        <span class="keyword">return</span> ds.getConnection();<span class="comment">//自动加载xml默认配置</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>XML配置文件</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 默认配置，如果没有指定则使用这个配置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">default-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span></span><br><span class="line">      &lt;![CDATA[jdbc:mysql://localhost:3306/shop?useUnicode=true&amp;characterEncoding=UTF-8]]&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>codefriday<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 初始化池大小 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 最大空闲时间 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdleTime"</span>&gt;</span>30<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 最多有多少个连接 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 最少几个连接 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 每次最多可以执行多少个批处理语句 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">default-config</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 命名的配置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">"BarryLee"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span>&gt;</span>jdbc:mysql://127.0.0.1:3306/aa<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span>000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"acquireIncrement"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span><span class="comment">&lt;!-- 如果池中数据连接不够时一次增长多少个 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialPoolSize"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minPoolSize"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxPoolSize"</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatements"</span>&gt;</span>0<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxStatementsPerConnection"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span> <span class="comment">&lt;!-- he's important, but there's only one of him --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>测试代码</strong></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codefriday.demo04;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codefriday.demo04.utils.c3p0utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestC3P0</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            conn =  c3p0utils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">"INSERT INTO account(`name`,`money`) VALUES('C',10000.00)"</span>;</span><br><span class="line">            <span class="keyword">int</span> s = st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(s&gt;<span class="number">0</span>){</span><br><span class="line">                System.out.println(<span class="string">"插入成功"</span>);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }<span class="keyword">finally</span> {</span><br><span class="line">			st.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


                </div>
            </section>
        </article>
    </div>

    
    <div style="height: 4vw;width: 100%"></div>
    <nav id="gobottom" class="pagination">
        
        <a class="prev-post" title="GUI实时聊天" href="/2021/02/17/GUI%E5%AE%9E%E6%97%B6%E8%81%8A%E5%A4%A9/">
            ← GUI实时聊天
        </a>
        
        <span class="prev-next-post">•</span>
        
        <a class="next-post" title="前端实战，小米闪购官网" href="/2021/02/09/%E5%89%8D%E7%AB%AF%E5%AE%9E%E6%88%98%EF%BC%8C%E5%B0%8F%E7%B1%B3%E9%97%AA%E8%B4%AD%E5%AE%98%E7%BD%91/">
            前端实战，小米闪购官网 →
        </a>
        
    </nav>

    
    <div class="inner">
        <div id="comment"></div>
    </div>
    
</main>

<div class="toc-bar">
    <div class="toc-btn-bar">
        <a href="#site-main" class="toc-btn">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M793.024 710.272a32 32 0 1 0 45.952-44.544l-310.304-320a32 32 0 0 0-46.4 0.48l-297.696 320a32 32 0 0 0 46.848 43.584l274.752-295.328 286.848 295.808z"></path></svg>
        </a>
        <div class="toc-btn toc-switch">
            <svg class="toc-open" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M779.776 480h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M779.776 672h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M256 288a32 32 0 1 0 0 64 32 32 0 0 0 0-64M392.576 352h387.2a32 32 0 0 0 0-64h-387.2a32 32 0 0 0 0 64M256 480a32 32 0 1 0 0 64 32 32 0 0 0 0-64M256 672a32 32 0 1 0 0 64 32 32 0 0 0 0-64"></path></svg>
            <svg class="toc-close hide" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128.287273c-211.584464 0-383.712727 172.128262-383.712727 383.712727 0 211.551781 172.128262 383.712727 383.712727 383.712727 211.551781 0 383.712727-172.159226 383.712727-383.712727C895.712727 300.415536 723.551781 128.287273 512 128.287273z"></path><path d="M557.05545 513.376159l138.367639-136.864185c12.576374-12.416396 12.672705-32.671738 0.25631-45.248112s-32.704421-12.672705-45.248112-0.25631l-138.560301 137.024163-136.447897-136.864185c-12.512727-12.512727-32.735385-12.576374-45.248112-0.063647-12.512727 12.480043-12.54369 32.735385-0.063647 45.248112l136.255235 136.671523-137.376804 135.904314c-12.576374 12.447359-12.672705 32.671738-0.25631 45.248112 6.271845 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.103239 22.496761-9.247789l137.567746-136.064292 138.687596 139.136568c6.240882 6.271845 14.432469 9.407768 22.65674 9.407768 8.191587 0 16.352211-3.135923 22.591372-9.34412 12.512727-12.480043 12.54369-32.704421 0.063647-45.248112L557.05545 513.376159z"></path></svg>
        </div>
        <a href="#gobottom" class="toc-btn">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M231.424 346.208a32 32 0 0 0-46.848 43.584l297.696 320a32 32 0 0 0 46.4 0.48l310.304-320a32 32 0 1 0-45.952-44.544l-286.848 295.808-274.752-295.36z"></path></svg>
        </a>
    </div>
    <div class="toc-main">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、概述及准备工作"><span class="toc-text">1、概述及准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、操作数据库"><span class="toc-text">2、操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1、基础命令"><span class="toc-text">2.1、基础命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2、数据库的列类型"><span class="toc-text">2.2、数据库的列类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3、数据库的字段属性"><span class="toc-text">2.3、数据库的字段属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4、创建表"><span class="toc-text">2.4、创建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5、数据表的类型"><span class="toc-text">2.5、数据表的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6、修改和删除表"><span class="toc-text">2.6、修改和删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、MySQL数据管理"><span class="toc-text">3、MySQL数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1、外键"><span class="toc-text">3.1、外键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2、DML语言"><span class="toc-text">3.2、DML语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3、添加"><span class="toc-text">3.3、添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4、修改"><span class="toc-text">3.4、修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5、删除"><span class="toc-text">3.5、删除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、DQL查询数据"><span class="toc-text">4、DQL查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1、指定查询字段"><span class="toc-text">4.1、指定查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2、where条件字句"><span class="toc-text">4.2、where条件字句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3、联表查询"><span class="toc-text">4.3、联表查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4、分页和排序"><span class="toc-text">4.4、分页和排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5、子查询"><span class="toc-text">4.5、子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、MySQL函数"><span class="toc-text">5、MySQL函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1、常用函数"><span class="toc-text">5.1、常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2、聚合函数"><span class="toc-text">5.2、聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3、数据库级别的MD5加密"><span class="toc-text">5.3、数据库级别的MD5加密</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、事务"><span class="toc-text">6、事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1、事务定义"><span class="toc-text">6.1、事务定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2、执行事务"><span class="toc-text">6.2、执行事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、索引"><span class="toc-text">7、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1、索引分类"><span class="toc-text">7.1、索引分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2、测试索引"><span class="toc-text">7.2、测试索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3、索引原则"><span class="toc-text">7.3、索引原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8、权限管理和备份"><span class="toc-text">8、权限管理和备份</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1、权限管理"><span class="toc-text">8.1、权限管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2、MYSQL备份"><span class="toc-text">8.2、MYSQL备份</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9、规范数据库设计"><span class="toc-text">9、规范数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1、为什么需要设计"><span class="toc-text">9.1、为什么需要设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2、三大范式"><span class="toc-text">9.2、三大范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10、JDBC"><span class="toc-text">10、JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1、数据库驱动"><span class="toc-text">10.1、数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2、JDBC"><span class="toc-text">10.2、JDBC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3、第一个JDBC程序"><span class="toc-text">10.3、第一个JDBC程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4、Statement对象"><span class="toc-text">10.4、Statement对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5、PreparedStatement对象"><span class="toc-text">10.5、PreparedStatement对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-6、JDBC操作事务"><span class="toc-text">10.6、JDBC操作事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-9、连接池"><span class="toc-text">10.9、连接池</span></a></li></ol></li></ol>
    </div>
</div>



	</div>
	


<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
            

<article class="read-next-card" style="background-image: url(https://codefriday.oss-cn-beijing.aliyuncs.com/background.jpg)">
  <header class="read-next-card-header">
    <small class="read-next-card-header-sitetitle">— CodeFriday —</small>
    <h3 class="read-next-card-header-title">Recent Posts</h3>
  </header>
  <div class="read-next-divider">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path>
    </svg>
  </div>
  <div class="read-next-card-content">
    <ul>
      
      
      
      <li>
        <a href="/2021/03/07/SSM%E5%88%9D%E6%AC%A1%E6%95%B4%E5%90%88-%E6%A8%A1%E6%9D%BF/">SSM初次整合-模板</a>
      </li>
      
      
      
      <li>
        <a href="/2021/03/07/SSM%E6%95%B4%E5%90%88-c3p0%E8%BF%9E%E6%8E%A5%E6%B1%A0BUG%E8%A7%A3%E5%86%B3/">SSM整合,c3p0连接池BUG解决</a>
      </li>
      
      
      
      <li>
        <a href="/2021/03/06/SpringMVC/">SpringMVC</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
  <footer class="read-next-card-footer">
    <a href="/archives">  MORE  → </a>
  </footer>
</article>

            
            
            

<article class="read-next-card" style="background-image: url(https://codefriday.oss-cn-beijing.aliyuncs.com/background.jpg)">
    <header class="read-next-card-header" style="padding-bottom: 20px">
        <h3 class="read-next-card-header-title">Categories</h3>
    </header>
    <div class="read-next-card-content">
        <ul>
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BUG/">BUG</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE/">实战项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/">杂七杂八</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/">第一阶段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%84%9F%E6%82%9F/">第一阶段感悟</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/">第三阶段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/">第二阶段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/">第五阶段</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5/">第四阶段</a></li></ul>
        </ul>
    </div>
</article>


            
            
            

<article class="read-next-card" style="background-image: url(https://codefriday.oss-cn-beijing.aliyuncs.com/background.jpg)">
	<header class="read-next-card-header" style="padding-bottom: 20px">
		<h3 class="read-next-card-header-title">Tag Cloud</h3>
	</header>
	<div class="read-next-card-content-ext">
		<a href="/tags/BUG/" style="font-size: 14px;">BUG</a> <a href="/tags/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5/" style="font-size: 24px;">第一阶段</a> <a href="/tags/%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%E6%84%9F%E6%82%9F/" style="font-size: 20.67px;">第一阶段感悟</a> <a href="/tags/%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5/" style="font-size: 14px;">第三阶段</a> <a href="/tags/%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5/" style="font-size: 20.67px;">第二阶段</a> <a href="/tags/%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5/" style="font-size: 20.67px;">第五阶段</a> <a href="/tags/%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5/" style="font-size: 17.33px;">第四阶段</a> <a href="/tags/%E7%BC%96%E7%A0%81%E5%92%8C%E5%AD%97%E7%AC%A6%E9%9B%86/" style="font-size: 14px;">编码和字符集</a>
	</div>
</article>

            
        </div>
    </div>
</aside>

	




<div id="search" class="search-overlay subscribe-overlay">
    <div class="search-form">
        
        <img class="search-overlay-logo" src="https://codefriday.oss-cn-beijing.aliyuncs.com/author.jpg" alt="CodeFriday">
        
        <input id="local-search-input" class="search-input" type="text" name="search" placeholder="Search ...">
        <a class="search-overlay-close" href="#"></a>
    </div>
    <div id="local-search-result"></div>
</div>


<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<section class="copyright">
			<a href="/" title="CodeFriday">CodeFriday</a>
			© 2021
		</section>
		<nav class="site-footer-nav">
			
        </nav>
		<span id="busuanzi_container_site_pv">
                本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    </div>
	<p align="center">
	<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>

	<script>
		var now = new Date(); 
		function createtime() { 
			var grt= new Date("12/25/2020 00:00:00");//此处建站时间
			now.setTime(now.getTime()+250); 
			days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
			hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
			if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
			mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
			seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
			snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
			document.getElementById("timeDate").innerHTML = "本站已运行 "+dnum+" 天 "; 
			document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
		} 
	setInterval("createtime()",250);
	</script>
	</p>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations()
        .then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister();
            }
        });
    }
</script>







<div class="floating-header">
	<div class="floating-header-logo">
        <a href="/" title="CodeFriday">
			
                <img src="https://codefriday.oss-cn-beijing.aliyuncs.com/author.jpg" alt="CodeFriday icon">
			
            <span>CodeFriday</span>
        </a>
    </div>
    <span class="floating-header-divider">—</span>
    <div class="floating-header-title">MySQL</div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>






<script src="/js/mix/post-lazy-local.min.js"></script>


<script>;(function() {var bLazy = new Blazy()})();</script>





<script src="/js/lightgallery.min.js"></script>


<link rel="stylesheet" href="/css/lightgallery.min.css">

<script>
    lightGallery(document.getElementById('lightgallery'), {
        selector: '.post-img'
    });
</script>




<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#comment' ,
        verify: false,
        notify: false,
        appId: 'u5Keac77Cgj26AHTOFXr2N32-gzGzoHsz',
        appKey: 'eokpYg7BxMlX9Cs31zsM56A9',
        placeholder: '欢迎留言！',
        pageSize: 10,
        avatar: 'mm',
        visitor: true,
    });
</script>






<script>searchFunc("/")</script>







</body></html>